<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1"><title id="cj20941">CREATE VIEW</title><body><p id="sql_command_desc">Defines a new view.</p><section id="section2"><title>Synopsis</title><codeblock id="sql_command_synopsis">CREATE [OR REPLACE] [TEMP | TEMPORARY] VIEW <varname>name</varname>
       [ ( <varname>column_name</varname> [, ...] ) ]
       AS <varname>query</varname></codeblock></section><section id="section3"><title>Description</title><p><codeph>CREATE VIEW</codeph> defines a view of a query. The view is
not physically materialized. Instead, the query is run every time the
view is referenced in a query. </p><p><codeph>CREATE OR REPLACE VIEW</codeph> is similar, but if a view
of the same name already exists, it is replaced. You can only replace
a view with a new query that generates the identical set of columns (same
column names and data types). </p><p>If a schema name is given then the view is created in the specified
schema. Otherwise it is created in the current schema. Temporary views
exist in a special schema, so a schema name may not be given when creating
a temporary view. The name of the view must be distinct from the name
of any other view, table, sequence, or index in the same schema.</p></section><section id="section4"><title>Parameters</title><parml><plentry><pt>TEMPORARY | TEMP</pt><pd>If specified, the view is created as a temporary view. Temporary
views are automatically dropped at the end of the current session. Existing
permanent relations with the same name are not visible to the current
session while the temporary view exists, unless they are referenced with
schema-qualified names. If any of the tables referenced by the view are
temporary, the view is created as a temporary view (whether <codeph>TEMPORARY</codeph>
is specified or not). </pd></plentry><plentry><pt><varname>name</varname></pt><pd>The name (optionally schema-qualified) of a view to be created. </pd></plentry><plentry><pt><varname>column_name</varname></pt><pd>An optional list of names to be used for columns of the view. If
not given, the column names are deduced from the query. </pd></plentry><plentry><pt><varname>query</varname></pt><pd>A <codeph><xref href="./SELECT.xml#topic1" type="topic" format="dita"/></codeph> or
                <codeph><xref href="./VALUES.xml#topic1" type="topic" format="dita"/></codeph>
            command which will provide the columns and rows of the view.</pd></plentry></parml></section><section id="section5"><title>Notes</title><p>Views in Greenplum Database are read only. The system will not allow
an insert, update, or delete on a view. You can get the effect of an
updatable view by creating rewrite rules on the view into appropriate
actions on other tables. For more information see <codeph>CREATE RULE</codeph>.
</p><p>Be careful that the names and data types of the view's columns will
be assigned the way you want. For example:</p><codeblock>CREATE VIEW vista AS SELECT 'Hello World';</codeblock><p>is bad form in two ways: the column name defaults to <codeph>?column?</codeph>,
and the column data type defaults to <codeph>unknown</codeph>. If you
want a string literal in a view's result, use something like:</p><codeblock>CREATE VIEW vista AS SELECT text 'Hello World' AS hello;</codeblock><p>Access to tables referenced in the view is determined by permissions of
the view owner not the current user (even if the current user is a superuser).
This can be confusing in the case of superusers, since superusers typically
have access to all objects. In the case of a view, even superusers must
be explicitly granted access to tables referenced in the view if they
are not the owner of the view.</p><p>However, functions called in the view are treated the same as if they
had been called directly from the query using the view. Therefore the
user of a view must have permissions to call any functions used by the
view.</p><p>If you create a view with an <codeph>ORDER BY</codeph> clause, the
<codeph>ORDER BY</codeph> clause is ignored when you do a <codeph>SELECT</codeph>
from the view.</p></section><section id="section6"><title>Examples</title><p>Create a view consisting of all comedy films: </p><codeblock>CREATE VIEW comedies AS SELECT * FROM films WHERE kind = 
'comedy';</codeblock><p>Create a view that gets the top ten ranked baby names:</p><codeblock>CREATE VIEW topten AS SELECT name, rank, gender, year FROM 
names, rank WHERE rank &lt; '11' AND names.id=rank.id;</codeblock></section><section id="section7"><title>Compatibility</title><p>The SQL standard specifies some additional capabilities for the <codeph>CREATE
VIEW</codeph> statement that are not in Greenplum Database. The optional
clauses for the full SQL command in the standard are: </p><ul><li id="cj152047"><b>CHECK OPTION</b> — This option has to do with updatable views.
All <codeph>INSERT</codeph> and <codeph>UPDATE</codeph> commands on the
view will be checked to ensure data satisfy the view-defining condition
(that is, the new data would be visible through the view). If they do
not, the update will be rejected.</li><li id="cj152050"><b>LOCAL</b> — Check for integrity on this view. </li><li id="cj152053"><b>CASCADED</b> — Check for integrity on this view and on any dependent
view. <codeph>CASCADED</codeph> is assumed if neither <codeph>CASCADED</codeph>
nor <codeph>LOCAL</codeph> is specified. </li></ul><p><codeph>CREATE OR REPLACE VIEW</codeph> is a Greenplum Database language
extension. So is the concept of a temporary view. </p></section><section id="section8"><title>See Also</title><p><codeph><xref href="./SELECT.xml#topic1" type="topic" format="dita"/></codeph>, <codeph><xref
            href="./DROP_VIEW.xml#topic1" type="topic" format="dita"/></codeph></p></section></body></topic>
